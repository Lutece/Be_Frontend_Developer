<!DOCTYPE HTML>
<html lang="ko" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>사용자 모드로 구현되는 기능 - Be_Software_Engineer</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../introduction/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/introduction.html"><strong aria-hidden="true">2.</strong> Data Structure and Algorithm</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/final/bigO.html"><strong aria-hidden="true">2.1.</strong> BigO</a></li><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/final/array.html"><strong aria-hidden="true">2.2.</strong> 배열</a></li><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/pocu/introduction.html"><strong aria-hidden="true">2.3.</strong> pocu 강의정리</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/pocu/algorithm.html"><strong aria-hidden="true">2.3.1.</strong> 알고리즘의 정의와 효율성</a></li><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/pocu/bigO.html"><strong aria-hidden="true">2.3.2.</strong> 빅오표기법</a></li><li class="chapter-item expanded "><a href="../../../dataStructure_and_algorithm/pocu/array.html"><strong aria-hidden="true">2.3.3.</strong> 배열</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../java/introduction.html"><strong aria-hidden="true">3.</strong> Java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../java/pocu/1.html"><strong aria-hidden="true">3.1.</strong> pocu 강의 정리</a></li><li class="chapter-item expanded "><a href="../../../java/books/1/basic.html"><strong aria-hidden="true">3.2.</strong> 자바의 신</a></li></ol></li><li class="chapter-item expanded "><a href="../../../javascript/introduction.html"><strong aria-hidden="true">4.</strong> Javascript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../javascript/var.html"><strong aria-hidden="true">4.1.</strong> var</a></li><li class="chapter-item expanded "><a href="../../../javascript/data.html"><strong aria-hidden="true">4.2.</strong> data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../javascript/data/array.html"><strong aria-hidden="true">4.2.1.</strong> array</a></li><li class="chapter-item expanded "><a href="../../../javascript/data/collection.html"><strong aria-hidden="true">4.2.2.</strong> collection</a></li><li class="chapter-item expanded "><a href="../../../javascript/data/date.html"><strong aria-hidden="true">4.2.3.</strong> date</a></li><li class="chapter-item expanded "><a href="../../../javascript/data/math.html"><strong aria-hidden="true">4.2.4.</strong> math</a></li><li class="chapter-item expanded "><a href="../../../javascript/data/number.html"><strong aria-hidden="true">4.2.5.</strong> number</a></li><li class="chapter-item expanded "><a href="../../../javascript/data/String.html"><strong aria-hidden="true">4.2.6.</strong> string</a></li><li class="chapter-item expanded "><a href="../../../javascript/data/symbol.html"><strong aria-hidden="true">4.2.7.</strong> symbol</a></li></ol></li><li class="chapter-item expanded "><a href="../../../javascript/hoisting.html"><strong aria-hidden="true">4.3.</strong> hosting</a></li><li class="chapter-item expanded "><a href="../../../javascript/json.html"><strong aria-hidden="true">4.4.</strong> json</a></li><li class="chapter-item expanded "><a href="../../../javascript/scope.html"><strong aria-hidden="true">4.5.</strong> scope</a></li></ol></li><li class="chapter-item expanded "><a href="../../../linux/introduction.html"><strong aria-hidden="true">5.</strong> Linux</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../linux/books/1/introduction.html"><strong aria-hidden="true">5.1.</strong> 실습과 그림으로 배우는 리눅스 구조</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter1.html"><strong aria-hidden="true">5.1.1.</strong> 컴퓨터 시스템의 개요</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter2.html" class="active"><strong aria-hidden="true">5.1.2.</strong> 사용자 모드로 구현되는 기능</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter3.html"><strong aria-hidden="true">5.1.3.</strong> 프로세스 관리</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter4.html"><strong aria-hidden="true">5.1.4.</strong> 프로세스 스케줄러</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter5.html"><strong aria-hidden="true">5.1.5.</strong> 메모리 관리</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter6.html"><strong aria-hidden="true">5.1.6.</strong> 메모리 계층</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter7.html"><strong aria-hidden="true">5.1.7.</strong> 파일 시스템</a></li><li class="chapter-item expanded "><a href="../../../linux/books/1/chapter8.html"><strong aria-hidden="true">5.1.8.</strong> 저장 장치</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Be_Software_Engineer</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="사용자-모드로-구현되는-기능"><a class="header" href="#사용자-모드로-구현되는-기능">사용자 모드로 구현되는 기능</a></h1>
<p>사용자 모드는 라이브러리 형태인 것도 있고 단독 프로그램으로 동작하는 것도 있다.</p>
<h2 id="시스템-콜"><a class="header" href="#시스템-콜">시스템 콜</a></h2>
<ul>
<li>프로세스는 프로세스의 생성이나 하드웨어의 조작 등 커널의 도움이 필요할 경우 시스템 콜을 통해 커널에 처리를 요청합니다.</li>
</ul>
<h3 id="시스템-콜의-종류"><a class="header" href="#시스템-콜의-종류">시스템 콜의 종류</a></h3>
<ul>
<li>프로세스 생성, 삭제</li>
<li>메모리 확보, 해제</li>
<li>프로세스 간 통신 (IPC)</li>
<li>네트워크</li>
<li>파일시스템 다루기</li>
<li>파일 다루기 (디바이스 접근)</li>
</ul>
<h3 id="cpu의-모드-변경"><a class="header" href="#cpu의-모드-변경">CPU의 모드 변경</a></h3>
<ul>
<li>시스템 콜은 CPU의 특수한 명령을 실행해야만 호출된다. 프로세스는 보통 사용자 모드로 실행되고 있지만 커널에 처리를 요청하고자 시스템 콜을 호출하면 CPU에서는 인터럽트 이벤트가 발생한다.</li>
<li>인터럽트 이벤트가 발생하면 CPU는 사용자 모드에서 커널 모드로 변경되며 요청한 내용을 처리하기 위해 커널이 동작하기 시작한다.</li>
<li>요청한 내용 처리가 끝나면 커널 내의 시스템 콜 처리가 종료된다. 그리고 다시 사용자 모드로 돌아가 프로세스의 동작을 계속 진행한다.</li>
</ul>
<p>커널은 프로세스가 요청한 내용을 처리하기 전에 프로세스의 요구가 유효한지 확인한다.
요구 사항이 맞지 않는다면 커널은 시스템 콜을 실패했다고 처리한다.
(예를 들어 시스템의 메모리 용량 이상의 메모리를 요구하는 것 등)</p>
<h3 id="시스템-콜-호출의-동작-순서"><a class="header" href="#시스템-콜-호출의-동작-순서">시스템 콜 호출의 동작 순서</a></h3>
<pre><code class="language-c">
$ cc -o hello hello.c
$ cc -o hello hello.py

/* 
cc 시스템 콜 로그를 출력하는 커맨드
-o strace 출력을 별도로 저장하기 위한 output 옵션
*/

</code></pre>
<p>어플리케이션 코드 작성을 위한 프로그램 언어가 무엇이든 상관없이 프로그램이 커널에 요청을 할 때 사용되는 시스템 콜을 호출하는 코드는 동일하다는 것을 알 수 있다.</p>
<p>프로세스가 사용자 모드와 커널 모드 중 어느 쪽에서 실행되고 있는 지의 비율은 'sar' 명령어로 확인할 수 있다.</p>
<pre><code>
$ sar -P ALL 1 //각 CPU 코어가 어떤 종류의 처리를 실행하고 있는 지를 1초 단위로 측정한다.

</code></pre>
<h3 id="시스템-콜-명령어"><a class="header" href="#시스템-콜-명령어">시스템 콜 명령어</a></h3>
<ul>
<li>getppid() : 부모 프로세스의 프로세스 ID를 얻는 명령어 (get parent process id)</li>
<li>kill <code>process id</code>: 프로세스를 종료</li>
<li>strace -T : 각종 시스템 콜 처리에 걸린 시간을 마이크로초 단위로 정밀하게 측정할 수 있다.</li>
</ul>
<h2 id="시스템-콜의-wrapper-함수--시스템-콜을-호출하는-일만-하는-함수"><a class="header" href="#시스템-콜의-wrapper-함수--시스템-콜을-호출하는-일만-하는-함수">시스템 콜의 Wrapper 함수 = 시스템 콜을 호출하는 일만 하는 함수</a></h2>
<p>리눅스에는 프로그램의 작성을 도와주기 위해 프로세스 대부분에 필요한 여러 라이브러리 함수가 있다.
시스템 콜은 보통의 함수 호출과는 다르게 C언어 등의 고급언어에서는 직접 호출이 불가능하다.
아키텍처에 의존하는 어셈블리 코드를 사용해 호출할 필요가 있다.</p>
<p>이러한 문제를 해결하기 위해서 OS는 내부적으로 시스템 콜을 호출하는 일만 하는 함수를 제공하는 데 이를 시스템 콜 wrapper라고 한다.</p>
<h2 id="표준-c-라이브러리"><a class="header" href="#표준-c-라이브러리">표준 C 라이브러리</a></h2>
<p>C 언어에는 ISO에 의해 정해진 표준 라이브러리가 있다.
리눅스에도 이 표준 C라이브러리가 제공되고 있다.
보통은 GNU 프로젝트가 제공하는 glibc를 표준 C라이브러리로 사용한다.
대부분의 C 프로그램은 glibc를 링크하고 있다.</p>
<p>glibc는 시스템 콜의 wrapper 함수를 포함한다.
또한 POSIX 규격에 의해 정의된 함수도 제공한다.</p>
<p>POSIX: 유닉스 계열의 OS가 갖추어야 할 각종 기능을 정해둔 규격
GNU 프로젝트: 유닉스와 호환되는 자유 소프트웨어를 개발하는 프로젝트</p>
<ul>
<li>프로그램을 어떠한 목적으로도 시행할 수 있는 자유</li>
<li>프로그램이 어떻게 동작하는지 학습하고 자신의 필요에 맞게 개박할 수 있는 자유, 이를 위해서는 소스코드에 대한 접근이 전제되어야 한다.</li>
<li>이웃을 돕도록 복제물을 재배포할 수 있는 자유</li>
<li>프로그램을 개선할 수 있는 자유와 개선된 이점을 공동체 전체가 누리도록 발표할 수 있는 자유, 이를 위해서도 역시 소스코드에 대한 접근이 전제되어야 한다.
ISO: 국제 표준화 기구</li>
</ul>
<pre><code>
$ ldd /bin/echo

ldd: 프로그램이 어떠한 라이브러리를 링크하고 있는 지 알 수 있는 명령어

</code></pre>
<h2 id="os가-제공하는-프로그램"><a class="header" href="#os가-제공하는-프로그램">OS가 제공하는 프로그램</a></h2>
<p>OS가 제공하는 프로그램은 OS가 제공하는 라이브러리와 마찬가지로 대부분의 프로그램이 필요하다
OS의 동작을 변경시키는 프로그램도 OS의 일부로써 제공된다.</p>
<ul>
<li>시스템 초기화: init</li>
<li>OS의 동작을 바꿈: sysctl, nice, sync</li>
<li>파일 관련: touch, mkdir</li>
<li>텍스트 데이터 가공: grep, sort, uniq</li>
<li>성능 측정: sar, iostat</li>
<li>컴파일러: gcc</li>
<li>스크립트 언어 실행 환경: perl, python, ruby</li>
<li>셀: bash</li>
<li>윈도우 시스템: X</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../linux/books/1/chapter1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../../linux/books/1/chapter3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../linux/books/1/chapter1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../../linux/books/1/chapter3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
